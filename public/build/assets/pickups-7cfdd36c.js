import{E as b}from"./Events-89d9745c.js";import{M as g,V as w,B as k,A as y}from"./Alerts-a8115d64.js";import"./sweetalert2-1b336dd7.js";class h{init(e,t={},n=[],c=[],o=function(){},r=function(){}){$("#"+e).DataTable({data:t,columns:n,columnDefs:c,responsive:{details:{type:"column",target:"tr"}},language:{url:"//cdn.datatables.net/plug-ins/1.12.1/i18n/es-ES.json"},initComplete:function(){o()},drawCallback:function(){r()}})}simpleInit(e){$("#"+e).DataTable({responsive:!0,language:{url:"//cdn.datatables.net/plug-ins/1.12.1/i18n/es-ES.json"}})}addRow(e,t={}){$("#"+e).DataTable().row.add(t).draw()}destroy(e){$("#"+e).DataTable().destroy()}object(e){return $("#"+e).DataTable()}removeRow(e,t){$("#"+e).DataTable().row(t).remove().draw()}sortByColumn(e,t,n="asc"){$("#"+e).DataTable().order([t,n]).draw()}}class v{render(e){let t="";switch(e){case 1:t='<span class="badge rounded-pill text-bg-warning">Abierto</span>';break;case 2:t='<span class="badge rounded-pill text-bg-primary">En proceso</span>';break;case 3:t='<span class="badge rounded-pill text-bg-danger">Problema</span>';break}return t}}$(function(){const i=new b,e=new h,t=new k,n=new g("logistic-new-pickup-modal"),c=new w,o=new y,r=new v;d();function d(){i.post("/api/v1/Logistic/Pickup",{api_key,_method:"GET"},function(s){s.code==200&&e.init("pickups-table",s.data.Pickups,p(),m(),function(){e.sortByColumn("prices-lists-table",1,"asc")},function(){})})}function p(){return[{data:"Id",render:function(a,u,l){return`
                    <a class="fs-5 fw-bold" href="/Logistica/Recoleccion/`+a+`">
                        <i class="bi bi-eye"></i>
                    </a>`},className:"text-center"},{data:"Id"},{data:"BranchName"},{data:"UserName"},{data:"StatusName",render:function(a,u,l){return r.render(l.StatusId)},className:"text-center"},{data:"created_at",render:function(a,u,l){return moment(a).format("DD/MM/YYYY HH:mm")}}]}function m(){return[{targets:["_all"],className:"align-middle"}]}t.initClic("#logistic-new-pickup-form-button",function(s){$("#pickup-branch option:first").prop("selected",!0),n.show(),f()});function f(){c.form_reset("#new-pickup-form"),t.initClic("#logistic-new-pickup-button",function(s){c.form("#new-pickup-form")&&i.post("/api/v1/Logistic/Pickup",{api_key,_method:"PUT",branch:$("#pickup-branch").val()},function(a){a.code==200?o.success(a.message,4e3,function(){n.hide(),window.location.href="/Logistica/Recoleccion/"+a.data.Pickup.Id}):o.error(a.message)},function(){o.error("No se pudo crear el registro de recolección. Recargue la página e intente nuevamente.",4e3,function(){n.hide()})})})}});
